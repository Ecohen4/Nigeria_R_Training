Basic R
========================================================

getting started
----
### interface of Rstudio

### set working directory 
```{r}
# getting the current working directory 
getwd()
# setting "my working directory" as 
# "~/work/r/nigeria_r_training/"
setwd("~/work/r/nigeria_r_training/")
```
### libraries
 * install packages
 * to install packges in r, call install.packages() with quoted package name: 
```{r}
install.packages("plyr")
```   
  2. to load libraries in r call library() fucntion
  
```{r}
library(plyr)
```
  
### reading data: read.csv
  * csv is the prefered data format in NMIS and in the data science space in general. although there are functions in R to read other data formats, we recommend that one converts to csv prior to loading.  
```{r}
sample_data <- read.csv("./sample_health_facilities.csv", na.strings = "NA", 
                        stringsAsFactors=FALSE, skip=0, nrows=-1)
```
### data types: 
  1. numerical
  2. integer
  3. boolean
  4. character
  5. factors


data.frames
--------------
### getting names in the data.frame
```{r message=FALSE, echo=TRUE, eval=FALSE}
names(sample_data)
```
```{r message=FALSE, echo=FALSE, eval=TRUE}
names(sample_data)[1:10]
```



### getting value/column from a data.frame
* a column in our data set is equavilent to a question in the survey
 1. using "$" operator
 2. calling column by it's name directly
 3. note: using head() to show only the first nth elements
```{r echo=TRUE, eval=FALSE}
sample_data$lga

sample_data[, "lga"]
```

```{r echo=FALSE, eval=TRUE}
head(sample_data$lga, 10)

head(sample_data[, "lga"], 10)
```


### getting row content by calling the row number
 * a row in our data set is equavilent to one full survey i.e. one facility
 * note: index in R starts at 1 instead of 0
```{r echo=TRUE, eval=FALSE}
sample_data[2, ]
```
```{r echo=FALSE, eval=TRUE}
sample_data[2, ][1:10]
```
### slicing and dicing in R

* getting the 1st column(only showing the first 10)
```{r}
head(sample_data[, 1], 10)
```

* getting the element in 4th row and 5th column
```{r}
sample_data[4, 5]
```

* getting the elements from 4th to 6th row and column 1 to column 5(inclusive)
```{r}
sample_data[4:6, 1:5]
```

### exploring the data frame with some useful functions
* getting the structure
```{r}
str(sample_data)
```

* getting the class of specific column
```{r}
class(sample_data$lga)

class(sample_data[, 1])

class(sample_data[, "lga"])
```

* getting the summary/descriptive statistics 
* works with both column and data.frame
```{r}
summary(sample_data$zone)

summary(sample_data)
```

* table of content of COLUMN
```{r}
table(sample_data$zone)
```

Creating data frames
---------------------

### joining columns:
* R supports SQL-like join functionality with merge()
```{r}
data1 <- unique(sample_data[, 2:5])
data2 <- sample_data[,-(2:4)]
```

* inner join
```{r}
inner_join <- merge(data1, data2, by="lga_id")
```

* outer join
```{r}
outer_join <- merge(data1, data2, by="lga_id", all=TRUE)
```

* left outer join
```{r}
left_outer_join <- merge(data1, data2, by.x="lga_id",
                    by.y="lga_id",all.x=TRUE)
```


```{r fig.width=7, fig.height=6}

```

